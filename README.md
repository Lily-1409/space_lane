# Стартовый шаблон для верстки сайтов. 

### Используемые технологии

GULP, HTML (PUG/TWIG), SCSS, WEBPACK

### Описание

Шаблон предоставляет все необходимое для быстрого старта веб-проекта.

#### Возможности сборки:

- Создание бандлов SCSS и JS;
- Сборка TWIG / PUG шаблонов;
- Преобразовывание синтаксиса препроцессора SASS в «чистый» CSS;
- Минифицирование CSS и JS;
- Запуск локального веб-сервера и его быстрая перезагрузка в реальном времени;
- Подключена библиотека Pristine JS для валидации форм;
- Подключены основные метатеги, в том числе мета-теги Open Graph;
- Быстрая генерация favicon из PNG;
- Формирование итоговой сборки;
- Формирование zip-архива итоговой сборки;
- Доставка итоговой сборки на ftp клиент;

#### Дополнительные возможности: 

- Оптимизация изображений: сжатие изображений, генерация изображений формата Webp;
- Создание svg-спрайта;

### Окружение

Node v18.18.0

### Установка

```console
$ git clone https://gitlab.com/Nikanorov/strikt-frontend-starter.git
$ cd gulp-template
$ npm i gulp-cli -g
$ npm i
$ npm run env # копирование .env.example в .env
```

### Для ОС MacOS

Необходима установка fsevents

```console
npm i fsevents
```

### ENV

При изменении `SOURCE_FOLDER` в файле `.env`, необходимо изменить исходную папку в `package.json` для скриптов `format` и `lint` 

При изменении `DIST_FOLDER` в файле `.env`, необходимо добавить новую с результатом в `.gitignore`

### Персональная информация

Не забудьте изменить персональные данные в файлах `package.json` и `.env`

### Основные команды

#### Локальный сервер разработки

```console
$ npm run start
```

#### Продуктовый билд

```console
$ npm run build
```

### Дополнительные команды

- `npm run format` - запуск Prittier;
- `npm run zip` - создание архива папки билд;
- `npm run ftp` - сборка на ftp клиент;
- `npm run lint` - запуск анализатора кода;

### Структура проекта

```
├── dist/                                         # Папка с результатом 
│   ├── assets/                                   # Папка с ресурсами
│   │   ├── css/
│   │   │   └── index.min.css                     # Минифицированный стилевой файл
│   │   ├── favicons/                             # Папка с favicon под все платформы
│   │   │   ├── android-chrome-144x144.png
│   │   │   └── ...
│   │   ├── fonts/                                # Папка со шрифтами
│   │   │   ├── montserrat-bold-webfont.woff
│   │   │   └── ...
│   │   ├── images/                               # Папка со всеми изображениями
│   │   │   ├── webp/                             # Папка для изображений формата webp
│   │   │   ├── icons.svg                         # Спрайт с svg-иконоками
│   │   │   └── ...                               # Другие изображения формата jpeg, jpg, png, svg и т.д.
│   │   └── js/                                 
│   │       └── main.bundle.js                    # Минифицированный файл js
│   └── index.html
├── gulp/                                         #     
│   ├── config/                                   # Папка с настройками для gulp    
│   │   ├── index.js                              # Точка входа задач папки config
│   │   └── paths.js                              # Файл с настройками путей  
│   ├── tasks/                                    # Папка со всеми задачами
│   │   ├── common/                               # Папка с типовыми задачами
│   │   │   ├── browserSync.js                    # Задача запуска веб-сервера и его перезагрузка в реальном времени
│   │   │   └── ...
│   │   ├── main/                                 # Папка с основными задачами
│   │   │   ├── build.js                          # Задача сборки билда для продакшн
│   │   │   └── ...                         
│   │   └── index.js                              # Точка входа задач папки main 
│   └── index.js                                  # Точка входа задач папок config и tasks
├── src/                                          # Папка с исходниками проекта
│   ├── assets/                                   # Папка для хранения ресурсов
│   │   ├── favicons/
│   │   │   └── favicon.png                       # Файл фавиконки в формате png
│   │   ├── fonts/                                # Папка для хранения шрифтов
│   │   │   ├── montserrat-bold-webfont.woff
│   │   │   └── ...
│   │   ├── images/                               # Папка для хранения изображений
│   │   │   ├── ...
│   │   │   └── icons/                            # Специальная папка для хранения svg-иконок, которые сборка будет собирать в svg-спрайт
│   │   ├── js/                                   # Папка для хранения скриптов
│   │   │   └── index.js                          # Главный скрипт
│   │   ├── scss/                                 # Папка для хранения препроцессорных файлов sass
│   │   │    ├── components/                      # Папка со стилями компонентов
│   │   │    │    ├── _index.scss                 # Стилевой файл с импортами стилей всех компонентов   
│   │   │    │    ├── _button.scss 
│   │   │    │    └── ...   
│   │   │    ├── helpers/                         # Папка для хранения переиспользуемых модификаторов
│   │   │    │    ├── _index.scss                 # Стилевой файл с импортами                
│   │   │    │    ├──  
│   │   │    │    └── ...   
│   │   │    ├── layouts/                         # Папка для хранения стилей разметки
│   │   │    │    ├── _index.scss                     
│   │   │    │    ├──  
│   │   │    │    └── ...   
│   │   │    ├── mixins/                          # Папка с миксинами
│   │   │    │    ├── _index.scss                 # Стилевой файл с импортами всех миксинов   
│   │   │    │    ├── _media.scss 
│   │   │    │    └── ... 
│   │   │    ├── pages/                           # Папка для хранения стилей конкретных страниц
│   │   │    │    ├── _index.scss                   
│   │   │    │    ├──  
│   │   │    │    └── ...     
│   │   │    ├── variables/                        # Папка для хранения переменных для всего проекта
│   │   │    │   ├── _index.scss                   # Стилевой файл с импортами всех переменных scss 
│   │   │    │   └── ...
│   │   │    ├── _fonts.scss                       # Подключение шрифтов к проекту
│   │   │    └── index.scss                        # Основной стилевой файл с импортами всех остальных
│   ├── public/                                    # Папка для переноса, хранящихся в ней файлов без изменений
│   ├── html/                                      # Папка с html файлами
│   │   └── pages/
│   │       └── index.html                        # HTML-файл для главной страницы
│   ├── pug/                                      # Папка с файлами pug
│   │   ├── components/                           # Папка для хранения компонентов pug
│   │   │   ├── footer/
│   │   │   │   └── index.pug
│   │   │   └── ...                               
│   │   ├── includes/ 
│   │   │   ├── favicons.pug                      # Компонент для хранения разметки с фавиконками под все платформы
│   │   │   ├── meta.pug                          # Компонент для хранения разметки c метатегами
│   │   │   └── ...
│   │   ├── layouts/                              # Папка с шаблоном, который хранит основную структуру, и от него наследуются все другие страницы
│   │   │   ├── default.pug                     
|   |   |   └── ...
│   │   └── pages/                                # Папка для хранения страниц, которые наследуются от шаблона и подключают свои контентные модули
│   │       ├── index.pug
|   |       └── ...
│   └── twig/                                     # Структура папок `twig` аналогично структуре папок `pug`
│       ├── components/
│       │   ├── footer/
│       │   │   ├── index.twig
|       |   |   └── ...
│       │   └── ...
│       ├── includes/
│       │   ├── favicons.twig
│       │   └── ...
│       ├── layouts/
│       │   ├── default.twig
|       |   └── ...
│       └── pages/
│          ├── index.twig
|          └── ...
├── .env                                          # Переменные окружения env текущего проекта
├── .env.example                                  # Шаблон для настроек переменных окружения env
├── .eslintignore                                 # Настройка игнорирования файлов для обработки при помощи ESLint
├── .eslintrc                                     # Правила для eslint
├── .gitignore                                    # Настройка игнорирования файлов для системы контроля версий git
├── .prettierrc                                   # Файл-конфиг для работы плагина `Prettier`.
├── gulpfile.js                                   # Автоматизация для Gulp
├── package.json                                  # Зависимости проекта, скрипты, настройки проекта
├── package-lock.json                             # Зависимости проекта
├── README.md                                     # Документация - файл с описанием структуры, нюансов работы и особенностями данного шаблона сборки фронтенда
└── webpack.config.js                             # Сборка js модулей               
```

### Работа с разметкой

При работе с HTML все страницы с разметкой расположены в папке `src/html/pages/`.
При работе с PUG или TWIG все компоненты подключаются на страницы, которые расположены в папках `src/pug/pages/` или `src/pug/pages/`.

```
└── src 
    └── assets
        └── (html | pug | twig)                                   
            └── pages
                ├──  (index.html | index.pug | index.twig)
                ├──  (catalog.html | catalog.pug | catalog.twig)
                └──  ...
```

Файлы формата PUG и TWIG сборка скомпилирует в HTML.
Все файлы формата HTML сборка перенесет в папку `dist/`.

```
└── dist
    ├──  index.html
    ├──  catalog.html
    └──  ...
```

### Работа со стилями

Исходные SCSS-файлы со стилями расположены в папке `src/assets/scss`.

```
└── src/
    └── assets/
        └── scss/
            ├── components/ 
            │   ├── index.scss
            │   ├── button.scss
            │   │── ...
        │   │── ...
            ├── variables
            │   ├── index.scss
            │   ├── media.scss
            │   └── ...
            ├── fonts.scss
            └── index.scss
```

Файл со стилями компонентов `src/assets/scss/components/_index.scss` и остальные препроцессорные файлы подключаются в `src/assets/index.scss`.

```
/* Global */
@import "./variables/index.scss";
@import "normalize.css/normalize";
@import "./fonts.scss";
@import "./mixin/index.scss";

/* Pages */
@import "./pages/example";
```

Все препроцессорные файлы сборка скомпилирует в файл `index.css`, минифицирует его и перенесет в папку `dist/assets/css`

```
└── dist
    └── assets
        └── css
            └── index.min.css
```

### Работа с изображениями

Все исходные изображения (растровая и векторная графика) расположены в папке `src/assets/images`.
Векторная графика для спрайта (svg файлы) расположены в `src/assets/icons/`. 

```
└── src/
    └── assets/
        └── icons/
            ├── vector.svg
            └── ...
```

При запуске сборки:
- для растровых изображений сгенерируются изображения формата webp и сохранятся в папку `dist/assets/images/webp/`;
- оптимизируются все изображения, лежащие в папке `src/assets/images` и сохранятся в папке `dist/assets/images/`;
- создастся svg-спрайт `icons.svg` из иконок, лежащих в папке `src/assets/icons/` и сохранится в папке `dist/assets/images/`;

```
└── dist/
    └── images/
        ├── webp/                             
        ├── icons.svg                         
        └── ...                               
``` 

Каждой svg-иконке плагином `gulp-svg-sprite` присваивается id, который соответствует имени файла изображения (id так же можно менять в настройках, это описано в документации https://github.com/svg-sprite/svg-sprite/blob/main/docs/)

Чтобы обратиться к нужной иконке из спрайта необходимо к имени файла sprite.svg дописать id иконки, например `/assets/images/icons.svg#anchor`

```html
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" class="svg">
    <use xlink:href="/assets/images/icons.svg#anchor"></use>
</svg>
```

### Работа со шрифтами

Все файлы шрифтов расположены в папке `src/assets/fonts/`.

```
└── src/
    └── assets/
        └── fonts/
```

Сборка перенесет шрифты в папку `dist/assets/fonts/`.

```
└── dist/
    └── assets/
        └── fonts/
```

### Работа со скриптами

Все скрипты расположены в папке `src/assets/js/`. 

```
└── src/
    └── assets/
        └── js/                     
            ├── index.js    
            ├── catalog.js
            └── ... 
```

При создании js-файла, в настройки файла `webpack.config.js` необходимо внести следующие данные:

``` 
export default {
  mode: 'production',
  entry: {                                          # Вносить данные сюда
    index: './src/assets/js/index.js',
    catalog: './src/assets/js/catalog.js'           # Вносить данные подобным образом
  },
  ...
}
```

Сборка соберет js бандлы и перенесет их в папку `dist/assets/js/`.

```
└── dist/
    └── assets/
        └── js/                     
            ├── index.bundle.js   
            ├── catalog.bundle.js
            └── ... 
```

### Работа с фавиконками

Исходный файл фавиконки с разрешением png храниться в папке `src/assets/favicons/`.

```
└── src/
    └── assets/
        └── favicons/
            └── favicon.png
```

Сборка обработает изображение, создаст фавиконки и перенесет их в папку `dist/assets/favicons/`.

```
└── dist/
    └── assets/
        └── favicons/
            ├── android-chrome-36x36
            ├── android-chrome-48x48
            └── ...
```

### Работа с другими файлами. Папка public

`src/public/` - папка для хранения общедоступных файлов (таких как pdf, zip и т.д). 


```
└── src/
    └── public/
        ├── ...
        └── ...
```

Папка `public` копируется и переносится в папку с результатом `dist/` без изменений.

```
└── dist/
    └── public/
        ├── ...
        └── ...
```

## Рекомендации по написанию кода

### Правила оформления HTML

Используйте HTML5.
Используйте семантическую разметку и по возможности валидный код. Это облегчает чтение, редактирование и поддержку кода. 
- Разметка должна проходить тест на валидность с помощью https://validator.w3.org/;
- Разметка должна писаться аккуратно и единообразно;
- Только заголовки реализованы с помощью тегов `h1-h6`, а не всякий крупный/жирный текст, который встречается в макете.
- Избегайте пропуск уровней заголовков: всегда начинайте с `<h1>`, потом используйте `<h2>`, и так далее.
- Для изображений используйте атрибут alt;
- Ссылки реализованы с помощью тега `<a></a>`;
- Кнопки реализованы с помощью тега `<button></button>`;
- Для всех элементов `<button>` явно прописан атрибут type;
- У всех href должны быть заглушки #, если они никуда не ведут, в случае, когда мы находимся на данной странице;
- Прописывайте размер для всех изображений и иконок в разметке;
- Ретинизированные картинки в HTML вставлены через srcset;
- У интерактивных элементов при нажатии или фокусе с клавиатуры есть активное состояние;
- Все интерактивные элементы имеют текстовое описание. Либо текст, скрытый с помощью, visually-hidden, либо присутствует атрибут aria-label;
- На всех ссылках, которые не ведут на внутренние страницы стоит атрибут target="_blank" rel="nofollow noopener noreferrer"


### Правила оформления CSS

Используйте, по возможности, валидный CSS. Это помогает избавиться от избыточного кода и обеспечивает правильное использование таблиц стилей:
- Стили должны проходить тест на валидность с помощью https://validator.w3.org/;
- Стили должны писаться аккуратно и единообразно;
- При наименовании стилей используется методология БЭМ: 
    - Пример именования (подход Two Dashes): `block__elem--mod`;
- Имена классов / идентификаторов пишутся строчными буквами, между несколькими словами используется дефис;
- Избегайте большой вложенности стилей. 
- Названия идентификаторов и классов должны быть интуитивно понятными. Настолько длинные имена, насколько нужно, но настолько короткие, насколько возможно;
- Избегайте использование имен классов или идентификаторов с селекторами типа (тега) элемента. Кроме случаев когда это необходимо (например с классами-помощниками):

```
/* Не рекомендуется */
ul#example {}
div.error {}

/* Рекомендуется */
#example {}
.error {}
```

- Не указывайте единицы измерения для нулевых значений;
```
/* Не рекомендуется */
.example {
    margin: 0px;
}

/* Рекомендуется */
.example {
    margin: 0;
}
```

- Всегда ставьте отступы между блоками:
```
html {
    background: #fff;
    color: #444;
}

body {
    background: #fff;
    color: #444;
}
```

- Отделяйте селекторы переносом строки:
```
h1,
h2,
h3 {
    font-weight: normal;
    line-height: 1.2;
}
```
- Все картинки имеют фоновый цвет;
- Формат ссылки имеет префикс `tel:` на всех телефонных номерах и префикс `mailto`: для электронной почты;
- Область действия ссылки / кнопки должна совпадать с видимыми размерами элемента, а не растягиваться по ширине родительского блока или быть мнеьше элемента;
- `input` и связанный c ним `label` имеют одну область интерактива. Отсутствует некликабельное пространство между ними;
- `input` должен иметь базовую HTML-валидицию по типу поля;
- Футер "прибит" к низу HTML-страницы. Какой бы большой не была ширина/высота экрана — футер остается всегда снизу.







 

